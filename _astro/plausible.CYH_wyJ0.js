var a={},l={},h;function y(){if(h)return l;h=1,Object.defineProperty(l,"__esModule",{value:!0}),l.Plausible=void 0;let r=class{config;constructor(t){this.config=t}trackEvent(t,e){return this.sendEvent(t,e)}sendEvent(t,e){return this.sendRequest(t,{hashMode:!1,url:location.href,referrer:document.referrer||null,deviceWidth:window.innerWidth,...e})}sendRequest=async(t,e)=>{const{apiHost:n,domain:i,filter:o,transform:s}=this.config;if(o&&!o(e,t))return;s&&(e=s(e,t));const w={n:t,u:e.url,d:i,r:e.referrer,w:e.deviceWidth,h:e.hashMode?1:0,p:e&&e.props?JSON.stringify(e.props):void 0},d=await fetch(`${n}/api/event`,{method:"POST",headers:{"Content-Type":"text/plain"},body:JSON.stringify(w),keepalive:!0});if(!d.ok)throw new Error(d.statusText);await d.text()}};return l.Plausible=r,l}var c={},v;function O(){if(v)return c;v=1,Object.defineProperty(c,"__esModule",{value:!0}),c.enableAutoPageviews=void 0;const r=u=>{const t=()=>u.sendEvent("pageview"),e=()=>t(),n=history.pushState;return n&&(history.pushState=function(i,o,s){n.apply(this,[i,o,s]),e()},addEventListener("popstate",e)),t(),function(){n&&(history.pushState=n,removeEventListener("popstate",e))}};return c.enableAutoPageviews=r,c}var f={},g;function E(){if(g)return f;g=1,Object.defineProperty(f,"__esModule",{value:!0}),f.enableAutoOutboundTracking=void 0;const r=u=>{const t=e=>{for(const n of e.composedPath())n instanceof HTMLAnchorElement&&u.sendEvent("Outbound Link: Click",{props:{url:n.href}})};return document.addEventListener("click",t,{capture:!0}),function(){document.removeEventListener("click",t,{capture:!0})}};return f.enableAutoOutboundTracking=r,f}var P;function k(){return P||(P=1,function(r){var u=a&&a.__createBinding||(Object.create?function(e,n,i,o){o===void 0&&(o=i);var s=Object.getOwnPropertyDescriptor(n,i);(!s||("get"in s?!n.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return n[i]}}),Object.defineProperty(e,o,s)}:function(e,n,i,o){o===void 0&&(o=i),e[o]=n[i]}),t=a&&a.__exportStar||function(e,n){for(var i in e)i!=="default"&&!Object.prototype.hasOwnProperty.call(n,i)&&u(n,e,i)};Object.defineProperty(r,"__esModule",{value:!0}),t(y(),r),t(O(),r),t(E(),r)}(a)),a}var p=k();const _="https://vitonsky.net",A=r=>!(r.startsWith("/")||r.startsWith(".")||r.startsWith(_)||globalThis.location&&r.startsWith(globalThis.location.origin)),T=()=>{const r=new p.Plausible({domain:"vitonsky.net",apiHost:"https://uxt.vitonsky.net",filter(u,t){if(location.hostname==="localhost")return console.warn("Analytics event is skipped, since run on localhost",u),!1;if(window.localStorage.plausible_ignore==="true")return!1;if(t==="Outbound Link: Click"){const e=u.props?.url;if(typeof e!="string"||!A(e))return!1}return!0}});return p.enableAutoPageviews(r),p.enableAutoOutboundTracking(r),document.addEventListener("click",u=>{for(const t of u.composedPath()){if(!(t instanceof HTMLAnchorElement))continue;const e=t.innerText.trim(),n=120,i=e.length<=n?e:e.slice(0,n)+"...";r.trackEvent("linkClick",{props:{location:location.toString(),url:t.href,text:i}})}},{capture:!0}),r};let b=null;const S=()=>(b||(b=T()),b);export{S as g};
